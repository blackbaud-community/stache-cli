#!/usr/bin/env node

/**
* Why such a small file?  In almost all cases, this is simply a shim for grunt.
* We kept grunt in order to better support TFS / Visual Studio development (surprising right?)
**/

'use strict';

// Libraries
var path = require('path');
var shell = require('child_process').exec;
var cli = path.normalize(__dirname + '/../');
var cwd = path.normalize(process.cwd() + '/');
var gruntconfig = 'gruntfile.js';
var gruntfile = (path.exists(cwd + gruntconfig) ? cwd : cli) + gruntconfig;


// Configuration
var options = { cwd: cwd };
var args = [
  'grunt',
  process.argv.slice(2).join(':'),
  '--cli=' + cli,
  '--gruntfile=' + gruntfile,
  '--base=' + cwd
];

// Execution
var grunt = shell(args.join(' '), options);
var output = function (data) {
 process.stdout.write(data);
};

// Event Listening
grunt.stdout.on('data', output);
grunt.stderr.on('data', output);
grunt.on('error', output);