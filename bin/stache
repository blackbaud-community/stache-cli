#!/usr/bin/env node

/**
* Why such a small file?  In almost all cases, this is simply a shim for grunt.
* We kept grunt in order to better support TFS / Visual Studio development (surprising right?)
**/

'use strict';

// Libraries
var path = require('path');
var shell = require('child_process').exec;
var cwd = path.normalize(process.cwd() + '/');

// Configuration
var options = { cwd: cwd };
var args = [
  'grunt',
  process.argv.slice(2).join(':'),
  '--cli=' + path.normalize(__dirname + '/../'),
  '--gruntfile=' + cwd + 'gruntfile.js',
  '--base=' + path.normalize(process.cwd() + '/')
];

// Execution
var grunt = shell(args.join(' '), options);
var output = function (data) {
 process.stdout.write(data);
};

// Event Listening
grunt.stdout.on('data', output);
grunt.stderr.on('data', output);
grunt.on('error', output);